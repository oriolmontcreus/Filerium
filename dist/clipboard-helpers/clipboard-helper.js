(()=>{"use strict";({628:function(){var e=this&&this.__awaiter||function(e,o,t,n){return new(t||(t=Promise))((function(r,i){function s(e){try{a(n.next(e))}catch(e){i(e)}}function c(e){try{a(n.throw(e))}catch(e){i(e)}}function a(e){var o;e.done?r(e.value):(o=e.value,o instanceof t?o:new t((function(e){e(o)}))).then(s,c)}a((n=n.apply(e,o||[])).next())}))};function o(){return e(this,void 0,void 0,(function*(){try{const e=yield navigator.clipboard.read();if(console.log("Clipboard items retrieved:",e),0===e.length)return void chrome.runtime.sendMessage({closeTab:!0});for(const o of e){console.log("Processing clipboard item:",o);for(const e of o.types){if(console.log("Found type in clipboard item:",e),e.startsWith("image/")||"application/octet-stream"===e)return void(yield t(o,e));if("text/plain"===e)return void(yield n(o))}}chrome.runtime.sendMessage({closeTab:!0})}catch(e){!function(e){if(console.error("Error accessing clipboard:",e),e instanceof Error&&e.message.includes("Document is not focused"))chrome.runtime.sendMessage({closeTab:!0});else{const e=document.createElement("div");e.textContent="An error occurred while accessing the clipboard.",e.style.cssText="\n            color: #F44336; font-weight: 500; text-align: center; margin-top: 20px;\n            font-size: 18px;\n        ",document.body.appendChild(e)}}(e)}}))}function t(o,t){return e(this,void 0,void 0,(function*(){const e=yield o.getType(t);console.log("Blob retrieved:",e);const n=new FileReader;n.onloadend=()=>{console.log("Blob converted to Data URL:",n.result);let o=t;"application/octet-stream"===t&&"image/webp"===e.type&&(o="image/webp"),r({fileDataUrl:n.result,mimeType:o})},n.onerror=e=>{console.error("Error reading blob:",e),chrome.runtime.sendMessage({closeTab:!0})},n.readAsDataURL(e)}))}function n(o){return e(this,void 0,void 0,(function*(){const e=yield o.getType("text/plain");console.log("Text retrieved:",e);const t=new Blob([e],{type:"text/plain"}),n=new FileReader;n.onloadend=()=>{console.log("Text converted to Data URL:",n.result),r({fileDataUrl:n.result,mimeType:"text/plain"})},n.onerror=e=>{console.error("Error reading text:",e),chrome.runtime.sendMessage({closeTab:!0})},n.readAsDataURL(t)}))}function r(e){chrome.runtime.sendMessage(e,(e=>{chrome.runtime.lastError?console.error(`Error in sending message: ${chrome.runtime.lastError.message}`):(console.log("Message sent to background script, response:",e),chrome.runtime.sendMessage({closeTab:!0}))}))}console.log("Clipboard helper script loaded"),document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("readClipboardButton");e?e.addEventListener("click",o):console.error("Read clipboard button not found")}))}})[628]()})();