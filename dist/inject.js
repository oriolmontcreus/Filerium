(()=>{"use strict";({803:function(){var e=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,a){function l(e){try{s(o.next(e))}catch(e){a(e)}}function r(e){try{s(o.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,r)}s((o=o.apply(e,t||[])).next())}))};console.log("Inject script executing"),console.log("Initializing file input interceptor"),window.fileriuMInterceptorInitialized?console.log("File input interceptor already initialized"):window.fileriuMInterceptorInitialized||(function(){let t=!1,n=0,o=null,i=0;const a=200,l={};function r(e){console.log("Removing overlay"),e&&e.parentNode&&e.parentNode.removeChild(e)}function s(e){e.style.cssText="\n            padding: 16px 32px; margin: 0 10px; border: none; border-radius: 50px;\n            cursor: pointer; background: red; color: #e8e6e3; font-weight: 500;\n            transition: all 0.3s ease; font-size: 16px; text-transform: uppercase;\n            box-shadow: rgba(0, 0, 0, 0.1) 0px 4px 6px, rgba(0, 0, 0, 0.08) 0px 1px 3px;\n        ",e.addEventListener("mouseenter",(()=>{e.style.transform="translateY(-2px)",e.style.boxShadow="0 7px 14px rgba(0, 0, 0, 0.12), 0 3px 6px rgba(0, 0, 0, 0.08)"})),e.addEventListener("mouseleave",(()=>{e.style.transform="translateY(0)",e.style.boxShadow="0 4px 6px rgba(0, 0, 0, 0.1), 0 1px 3px rgba(0, 0, 0, 0.08)"})),e.addEventListener("click",(()=>{e.style.transform="translateY(1px)",e.style.boxShadow="0 1px 3px rgba(0, 0, 0, 0.1), 0 1px 2px rgba(0, 0, 0, 0.06)"}))}function c(e){e.style.border=l.border,e.style.backgroundColor=l.backgroundColor}function d(l){return e(this,void 0,void 0,(function*(){var d;console.log("Showing custom file upload overlay");const u=Date.now();if(u-i<a)return void console.log("Debouncing overlay creation");i=u;let f=document.getElementById("custom-file-upload-overlay");f&&(console.log("Removing existing overlay"),r(f)),f=function(){console.log("Creating overlay");const e=document.createElement("div");return e.id="custom-file-upload-overlay",e.style.cssText="\n            position: fixed; left: 0; top: 0; width: 100%; height: 100%;\n            background-color: rgba(15, 17, 17, 0.7); display: flex;\n            justify-content: center; align-items: center; z-index: 10000;\n            backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px);\n        ",e}(),document.body.appendChild(f);const b=document.createElement("div");b.className="overlay-container",b.style.cssText="\n            padding: 40px; background-color: #0f1111; border-radius: 12px; text-align: center;\n            position: relative; overflow: hidden; display: flex; flex-direction: column; align-items: center;\n        ";const v=document.createElement("div");v.style.cssText="\n            position: absolute; top: -50%; left: -50%; width: 200%; height: 200%;\n            background: linear-gradient(45deg, #0a6ab6, #145ea8);\n            transform: rotate(-45deg); opacity: 0.1; z-index: -1;\n        ",b.appendChild(v);const x=function(){console.log("Creating image preview element");const e=document.createElement("img");return e.style.cssText="\n            max-width: 100%; max-height: 400px; height: auto; border-radius: 10px;\n            object-fit: contain; margin-bottom: 30px; display: block; margin: 0 auto;\n            box-shadow: rgba(0, 0, 0, 0.1) 0px 15px 30px;\n        ",e}();x.className="image-preview";const h=function(e){const t=document.createElement("div");return t.textContent="Image Preview",t.style.cssText="\n            color: #c8c3bc; text-align: center; margin-bottom: 20px;\n            text-transform: uppercase; letter-spacing: 1px;\n        ",t}();h.className="image-label",h.style.color="#c8c3bc",x.style.display="none",h.style.display="none",b.append(h,x);const w=document.createElement("div");w.style.cssText="\n            display: flex; justify-content: center; align-items: center; margin-top: 30px;\n            flex-wrap: wrap; gap: 10px;\n        ";const E=document.createElement("button");E.textContent="Paste File",E.className="paste-button",s(E),E.onclick=()=>e(this,void 0,void 0,(function*(){console.log("Paste button clicked"),o&&(yield function(t,n){return e(this,void 0,void 0,(function*(){try{const o=yield function(t){return e(this,void 0,void 0,(function*(){var e;null===(e=t.split(",")[0].match(/:(.*?);/))||void 0===e||e[1];const n=yield fetch(t);return yield n.blob()}))}(n.fileDataUrl);let i;i="image/webp"===n.mimeType?"webp":"text/plain"===n.mimeType?"txt":n.mimeType.split("/")[1]||"bin";const a=`pasted-file-${function(e){let t="";for(let e=0;e<6;e++)t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(62*Math.random()));return t}()}.${i}`,l=new File([o],a,{type:n.mimeType}),s=new DataTransfer;s.items.add(l),t.files=s.files,t.dispatchEvent(new Event("change",{bubbles:!0})),t.dispatchEvent(new Event("input",{bubbles:!0}));const c=document.getElementById("custom-file-upload-overlay");c&&r(c)}catch(e){console.error("Error pasting file into input:",e)}}))}(l,o),l.dispatchEvent(new Event("change",{bubbles:!0})),l.dispatchEvent(new Event("input",{bubbles:!0})),r(f))})),E.style.display="none";const k=document.createElement("button");k.textContent="Browse Files",k.className="browse-button",k.dataset.browseFiles="true",s(k),k.onclick=e=>{console.log("Browse button clicked"),e.preventDefault(),e.stopPropagation(),t=!0,r(f),setTimeout((()=>{l.click(),setTimeout((()=>{t=!1}),100)}),0)},w.appendChild(E),w.appendChild(k),b.appendChild(w),f.appendChild(b),console.log("Requesting clipboard helper"),null===(d=window.top)||void 0===d||d.postMessage({type:"REQUEST_CLIPBOARD_HELPER",frameId:window.frameElement?window.frameElement.id:"top"},"*"),function(t,o){console.log("Setting up drag and drop events");const i=(e,n)=>{e.stopPropagation(),e.preventDefault(),n(e,t)},a=i=>e(this,void 0,void 0,(function*(){var e;console.log("File dropped"),i.stopPropagation(),i.preventDefault(),n=0,c(t);const a=null===(e=i.dataTransfer)||void 0===e?void 0:e.files;if(a&&a.length>0){o.files=a,o.dispatchEvent(new Event("change",{bubbles:!0})),o.dispatchEvent(new Event("input",{bubbles:!0}));const e=document.getElementById("custom-file-upload-overlay");e&&r(e)}}));t.addEventListener("dragover",(e=>i(e,y))),t.addEventListener("dragenter",(e=>i(e,g))),t.addEventListener("dragleave",(e=>i(e,m))),t.addEventListener("drop",(e=>a(e)))}(b,l),setTimeout((()=>{p()}),0),f.onclick=e=>{e.target===f&&r(f)};const T=e=>{"Escape"===e.key&&(r(f),document.removeEventListener("keydown",T))};document.addEventListener("keydown",T)}))}function p(){console.log("Updating overlay with clipboard data:",o);const e=document.getElementById("custom-file-upload-overlay");if(!e)return void console.log("Overlay not found");const t=e.querySelector(".paste-button"),n=e.querySelector(".image-preview"),i=e.querySelector(".image-label");console.log("Overlay elements:",{pasteButton:t,imagePreview:n,imageLabel:i}),t&&n&&i?(o&&(o.mimeType.startsWith("image/")||"text/plain"===o.mimeType)?(t.style.display="inline-block",console.log("Paste button displayed")):(t.style.display="none",console.log("Paste button hidden")),o&&o.mimeType.startsWith("image/")?(n.src=o.fileDataUrl,n.style.display="block",n.style.maxWidth="200px",n.style.maxHeight="200px",n.style.objectFit="contain",n.style.margin="10px auto",i.style.display="block",console.log("Image preview displayed")):(n.style.display="none",i.style.display="none",console.log("Image preview hidden"))):console.log("Some overlay elements not found")}function u(e){console.log("File input interaction detected");const n=e.target.closest('input[type="file"]');n&&!t&&(e.preventDefault(),e.stopPropagation(),d(n))}function g(e,t){var o;n++,1===n&&(o=t,l.border=o.style.border,l.backgroundColor=o.style.backgroundColor,o.style.border="3px dashed #2196F3",o.style.backgroundColor="green",o.style.transition="all 0.3s ease")}function m(e,t){n--,0===n&&c(t)}function y(e){e.dataTransfer.dropEffect="copy"}!function(e=document){e.addEventListener("click",u,!0)}(),window.addEventListener("message",(function(e){console.log("Inject script received message:",e.data),e.data&&"CLIPBOARD_DATA"===e.data.type&&(o=e.data.clipboardData,console.log("Clipboard data updated:",o),p())}));const f=HTMLInputElement.prototype.showPicker;HTMLInputElement.prototype.showPicker=function(){if("file"!==this.type)return f.apply(this);d(this)},document.addEventListener("click",(function(e){const n=e.target;n instanceof HTMLInputElement&&"file"===n.type&&!t&&(e.preventDefault(),e.stopPropagation(),d(n))}),!0),console.log("Consistent overlay file input interceptor is active!")}(),window.fileriuMInterceptorInitialized=!0)}})[803]()})();