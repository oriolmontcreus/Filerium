(()=>{"use strict";console.log("Inject script executing"),function(){if(window.fileInputInterceptorActive)return void console.log("File input interceptor already active");window.fileInputInterceptorActive=!0,console.log("Initializing file input interceptor");let e=null;document.addEventListener("click",(function(t){if(!window.fileInputInterceptorActive)return;const n=t.target;console.log("Click detected on:",n),n instanceof HTMLInputElement&&"file"===n.type?(console.log("File input click intercepted:",n),t.preventDefault(),t.stopPropagation(),function(t){console.log("Creating overlay for file input:",t);const n=document.createElement("div");n.style.cssText="\n            position: fixed;\n            top: 0;\n            left: 0;\n            width: 100%;\n            height: 100%;\n            background: rgba(0, 0, 0, 0.5);\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            z-index: 9999;\n        ";const i=document.createElement("div");function o(){n.remove()}i.style.cssText="\n            background: white;\n            padding: 20px;\n            border-radius: 5px;\n            text-align: center;\n        ",i.onclick=e=>e.stopPropagation(),n.onclick=o;const l=document.createElement("button");l.textContent="Browse Files",l.onclick=()=>{console.log("Browse Files button clicked"),o();try{window.fileInputInterceptorActive=!1,t.click()}finally{window.fileInputInterceptorActive=!0}};const c=document.createElement("button");c.textContent="Paste Image",c.style.display="none",c.onclick=()=>{if(console.log("Paste Image button clicked"),e){const n=function(e){const t=atob(e.split(",")[1]),n=e.split(",")[0].split(":")[1].split(";")[0],i=new ArrayBuffer(t.length),o=new Uint8Array(i);for(let e=0;e<t.length;e++)o[e]=t.charCodeAt(e);return new Blob([i],{type:n})}(e.fileDataUrl),i=new File([n],"pasted_image.png",{type:e.mimeType}),o=new DataTransfer;o.items.add(i),t.files=o.files,t.dispatchEvent(new Event("change",{bubbles:!0}))}o()};const a=document.createElement("img");a.style.cssText="\n            max-width: 200px;\n            max-height: 200px;\n            margin-top: 10px;\n            display: none;\n        ",i.appendChild(l),i.appendChild(c),i.appendChild(a),n.appendChild(i),document.body.appendChild(n),console.log("Overlay added to the document"),window.postMessage({type:"GET_CLIPBOARD_CONTENTS"},"*")}(n)):console.log("Click detected but not on file input:",n)}),!0),window.addEventListener("message",(function(t){if(t.data&&"CLIPBOARD_CONTENTS_RESPONSE"===t.data.type){console.log("Received clipboard contents:",t.data.clipboardData),e=t.data.clipboardData;const n=document.querySelector('div[style*="position: fixed"]');if(n){const t=n.querySelector("button:nth-child(2)"),i=n.querySelector("img");e&&e.mimeType.startsWith("image/")&&(t.style.display="inline-block",i.src=e.fileDataUrl,i.style.display="block")}}})),console.log("File input interceptor initialized")}()})();